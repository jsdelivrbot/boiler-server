<div class="modal-header">
    <h3 class="modal-title" ng-show="$modal.category !== 16" id="modal-title" style="display: inline-block;" >通道自定义配置</h3>
    <h3 class="modal-title" ng-show="$modal.category === 16" id="modal-title" style="display: inline-block;" >配置详情确认</h3>
    <span ng-hide="$modal.template" class="ticket-id bold font-blue font-lg" style="display: inline-block;">终端编码{{ $modal.code }}</span>
    <button ng-hide="$modal.template" type="button" class="btn btn-default pull-right" ng-click="$modal.quickSet()">
        快速设置
    </button>
</div>
<style type="text/css">
    div.input-group.form-group,
    div.btn-group.form-group {
        padding-left: 15px;
        padding-right: 15px;
    }

    .modal-body .input-group span.unit {
        position: absolute;
        left: auto;
        right: 16px;
        top: 8px;
        float: right;
        z-index: 10;
        color: grey;
    }

    .modal-body .input-group a.addon,
    .modal-section .input-group a.addon {
        position: absolute;
        left: auto;
        right: 6px;
        top: 6px;
        float: right;
        z-index: 10;
        padding: 4px;
        width: 22px;
        height: 22px;
        font-size: 12px;
        line-height: 1em;
    }

    .modal-section {
        padding: 15px;
        text-align: right;
        border-top: 1px solid #e5e5e5;
    }

    .modal-body hr {
        margin-top: 6px;
    }

    #channel div.ui-select-container {
        display: inline-block;
        float: left;
        width: 72.8%;
    }

    #channel div.dropdown-group {
        display: inline-block;
        float: left;
        width: 13.4%;
    }

    #channel button.btn-cell {
        /*border-left: 1px solid #ccc;*/
        width: 100%;
        padding: 6px 3px;
    }

    #channel .table > tbody > tr > td {
        font-size: 13px;
        padding: 1px;
        border: 1px solid #ccc;
    }

    #channel .table > tbody > tr > td .btn-default {
        border: none;
    }

    #channel .tabbable-line {
        margin-left: 12px;
    }

    #channel .tabbable-line > .nav-tabs > li.open,
    #channel .tabbable-line > .nav-tabs > li {
        background: 0 0;
        border-top: none;
        border-bottom: none;
        padding-top: 6px;
    }

    #channel .tabbable-line > .nav-tabs > li.open,
    #channel .tabbable-line > .nav-tabs > li:hover {
        border-top: 4px solid #9fe4ea;
        padding-top: 2px;
    }

    #channel .tabbable-line > .nav-tabs > li.active {
        background: 0 0;
        border-top: 4px solid #36c6d3;
        position: relative;
        padding-top: 2px;
    }

    #channel.portlet.light .nav-tabs > li > a {
        padding: 0 10px 6px 5px;
    }

    #channel.portlet.light > .portlet-title {
        min-height: 0;
    }

    #channel .tabbable-line > .nav-tabs {
        margin-top: -16px;
    }

    #channel .table input{
        border: none;
    }
    #channel .table select{
        border: none;
    }
    #channel .chanel_label{
        color: #555;
        text-align: center;
        background-color: #eee;
        border: 1px solid #ccc;
    }
    #channel .conf_confirm tr{
        height:37px;
    }
    #channel .conf_confirm tr th{
        color: #0b94ea;
    }

</style>
<div class="modal-body" id="modal-body">
    <div id="channel">
        <div class="row tabbable-line" ng-hide="$modal.category === 16">
            <ul class="nav nav-tabs">
                <li ng-class="{'active': $modal.category === 9}">
                    <a ng-click="$modal.categoryChanged(9);">
                        <i class="icon-graph"></i>
                        模拟通道A
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 10}">
                    <a ng-click="$modal.categoryChanged(10);">
                        <i class="icon-graph"></i>
                        模拟通道B
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 11}">
                    <a ng-click="$modal.categoryChanged(11);">
                        <i class="fa fa-sliders"></i>
                        开关通道1
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 12}">
                    <a ng-click="$modal.categoryChanged(12);">
                        <i class="fa fa-sliders"></i>
                        开关通道2
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 13}">
                    <a ng-click="$modal.categoryChanged(13);">
                        <i class="fa fa-sliders"></i>
                        开关通道3
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 14}">
                    <a ng-click="$modal.categoryChanged(14);">
                        <i class="fa fa-pie-chart"></i>
                        状态通道
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 15}">
                    <a ng-click="$modal.categoryChanged(15);">
                        <i class="fa fa-wifi"></i>
                        通信参数
                    </a>
                </li>
            </ul>
        </div>
        <div class="row" style="padding: 0 15px;">
            <!--ANALOG A TABLE BEGIN-->
            <table ng-if="$modal.category === 9"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>模拟通道A</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-if="$index < 12"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td ng-init="innerIndex = 0; data = $modal.dataMatrix[outerIndex][innerIndex]">
                        <div class="btn-group" uib-dropdown style="width: 100%;">
                            <button type="button" uib-dropdown-toggle
                                    ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"
                                    style="width: 11%;">
                                <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                <span class="sr-only">通道状态</span>
                            </button>
                            <ui-select ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap"
                                       style="width: 89%;">
                            <ui-select-match placeholder="{{chan_row[0].Name}}">[{{$select.selected.Name}}][
                                <small class="font-blue-oleo">{{ $select.selected.Id }}</small>](
                                <small class="font-blue-oleo">{{ $select.selected.Scale }}</small>
                                <small class="font-blue-oleo">{{ $select.selected.Unit }}</small>)
                            </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[innerIndex] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>][
                                    <small ng-bind-html="param.Id | highlight: $select.search"></small>](
                                    <small ng-bind-html="param.Scale | highlight: $select.search"></small>
                                    <small ng-bind-html="param.Unit | highlight: $select.search"></small>)
                                </ui-select-choices>
                            </ui-select>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                <li class="dropdown-submenu">
                                    <a href><i class="fa fa-eye"></i> 位置</a>
                                    <ul class="dropdown-menu" style="min-width: 44px;">
                                        <li ng-repeat="priority in $modal.priorities">
                                            <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                <li class="divider"></li>
                                <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][0].Analogue.Function"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][0]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][0].Analogue.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][0].Analogue.Byte"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][0]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][0].Analogue.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][0].Analogue.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][0]"  class="form-control" >
                    </td>
                </tr>
                </tbody>
            </table>
            <!--ANALOG A TABLE END-->

            <!--ANALOG B TABLE BEGIN-->
            <table ng-if="$modal.category === 10"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>模拟通道B</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-if="$index < 12"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td ng-init="innerIndex = 1; data = $modal.dataMatrix[outerIndex][innerIndex]">
                        <div class="btn-group" uib-dropdown style="width: 100%;">
                            <button type="button" uib-dropdown-toggle
                                    ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"
                                    style="width: 11%;">
                                <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                <span class="sr-only">通道状态</span>
                            </button>
                            <ui-select ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap"
                                       style="width: 89%;">
                                <ui-select-match placeholder="{{chan_row[1].Name}}">[{{$select.selected.Name}}][
                                    <small class="font-blue-oleo">{{ $select.selected.Id }}</small>](
                                    <small class="font-blue-oleo">{{ $select.selected.Scale }}</small>
                                    <small class="font-blue-oleo">{{ $select.selected.Unit }}</small>)
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[innerIndex] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>][
                                    <small ng-bind-html="param.Id | highlight: $select.search"></small>](
                                    <small ng-bind-html="param.Scale | highlight: $select.search"></small>
                                    <small ng-bind-html="param.Unit | highlight: $select.search"></small>)
                                </ui-select-choices>
                            </ui-select>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                <li class="dropdown-submenu">
                                    <a href><i class="fa fa-eye"></i> 位置</a>
                                    <ul class="dropdown-menu" style="min-width: 44px;">
                                        <li ng-repeat="priority in $modal.priorities">
                                            <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                <li class="divider"></li>
                                <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][1].Analogue.Function"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][1]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][1].Analogue.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][1].Analogue.Byte"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][1]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][1].Analogue.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][1].Analogue.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][1]" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--ANALOG B TABLE END-->

            <!--SWITCH A TABLE BEGIN-->
            <table ng-if="$modal.category === 11"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道A</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%"
                        ng-init="innerIndex = 2; data = $modal.dataMatrix[outerIndex][innerIndex]">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                    <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-show="innerIndex !== 2 || outerIndex !== 0" ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{chan_row[2].Name}}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                   [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <input type="text"
                                   ng-show="innerIndex === 2 && outerIndex === 0"
                                   ng-model="chan.Name"
                                   ng-disabled="true"
                                   class="form-control ng-pristine ng-valid ng-touched has-success"
                                   placeholder="{{ chan_row[2].Name }}" style="width: 86.4%; border: none;">
                            <div uib-dropdown ng-show="innerIndex !== 2 || outerIndex !== 0" class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'yellow-lemon': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'fa-warning': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][2].Switch.Function"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][2]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][2].Switch.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][2].Switch.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][2]" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][2].Switch.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][2]" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH A TABLE END-->

            <!--SWITCH B TABLE BEGIN-->
            <table ng-if="$modal.category === 12"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道B</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%"
                        ng-init="innerIndex = 3; data = $modal.dataMatrix[outerIndex][innerIndex]">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                    <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-show="innerIndex !== 2 || outerIndex !== 0" ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{chan_row[3].Name}}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <input type="text"
                                   ng-show="innerIndex === 2 && outerIndex === 0"
                                   ng-model="chan.Name"
                                   ng-disabled="true"
                                   class="form-control ng-pristine ng-valid ng-touched has-success"
                                   placeholder="{{ chan_row[3].Name }}" style="width: 86.4%; border: none;">
                            <div uib-dropdown ng-show="innerIndex !== 2 || outerIndex !== 0" class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'yellow-lemon': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'fa-warning': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][3].Switch.Function"
                                   theme="bootstrap"  ng-disabled="!$modal.dataMatrix[outerIndex][3]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][3].Switch.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][3].Switch.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][3]" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][3].Switch.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][3]" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH B TABLE END-->

            <!--SWITCH B TABLE BEGIN-->
            <table ng-if="$modal.category === 13"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道C</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%"
                        ng-init="innerIndex = 4; data = $modal.dataMatrix[outerIndex][innerIndex]">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                    <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-show="innerIndex !== 2 || outerIndex !== 0" ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{chan_row[4].Name}}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <input type="text"
                                   ng-show="innerIndex === 2 && outerIndex === 0"
                                   ng-model="chan.Name"
                                   ng-disabled="true"
                                   class="form-control ng-pristine ng-valid ng-touched has-success"
                                   placeholder="{{ chan_row[4].Name }}" style="width: 86.4%; border: none;">
                            <div uib-dropdown ng-show="innerIndex !== 2 || outerIndex !== 0" class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'yellow-lemon': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 1}, {'fa-warning': $modal.dataMatrix[outerIndex][innerIndex].SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus(outerIndex, innerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][4].Switch.Function"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][4]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][4].Switch.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][4].Switch.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][4]" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][4].Switch.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][4]" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH B TABLE END-->

            <!--RANGE TABLE BEGIN-->
            <table ng-if="$modal.category === 14"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>状态通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index"
                    ng-if="$index < 12"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex + 1 }}
                    </td>
                    <td width="40%"
                        ng-init="innerIndex = 5; data = $modal.dataMatrix[outerIndex][innerIndex];">
                        <div class="btn-group" style="width: 100%;">
                            <div class="dropdown-group" uib-dropdown style="width: 10%;">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'green': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'red': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]">
                                        <i ng-class="['fa', {'fa-ellipsis-h': $modal.dataMatrix[outerIndex][innerIndex].Status === 0}, {'fa-eye': $modal.dataMatrix[outerIndex][innerIndex].Status === 1}, {'fa-eye-slash': $modal.dataMatrix[outerIndex][innerIndex].Status === 2}]"></i>
                                        <span ng-show="$modal.dataMatrix[outerIndex][innerIndex].Status === 1">{{ $modal.dataMatrix[outerIndex][innerIndex].SequenceNumber }}</span>
                                        <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus(outerIndex, innerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, innerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>

                            <ui-select ng-model="$modal.dataMatrix[outerIndex][innerIndex].Parameter"
                                       ng-change="$modal.matrixChanged(outerIndex, innerIndex);"
                                       theme="bootstrap"
                                       style="width: 80%;">
                                <ui-select-match placeholder="{{chan_row[4].Name}}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices repeat="param in $modal.parameters[4] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <button type="button"
                                    ng-disabled="!$modal.dataMatrix[outerIndex][innerIndex].Parameter || $modal.dataMatrix[outerIndex][innerIndex].Parameter.Id <= 0 || $modal.dataMatrix[outerIndex][innerIndex].Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': $modal.dataMatrix[outerIndex][innerIndex].Ranges.length <= 0}, {'blue-sharp': $modal.dataMatrix[outerIndex][innerIndex].Ranges.length > 0}]"
                                    ng-click="$modal.openRange($modal.dataMatrix[outerIndex][innerIndex], outerIndex)"
                                    style="width: 10%;">
                                <i ng-class="['fa', {'fa-calendar-plus-o': $modal.dataMatrix[outerIndex][innerIndex].Ranges.length <= 0}, {'fa-calendar-check-o': $modal.dataMatrix[outerIndex][innerIndex].Ranges.length > 0}]"></i>
                            </button>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][5].Analogue.Function"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][5]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][5].Analogue.Function.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="$modal.chanMatrix[outerIndex][5].Analogue.Byte"
                                   theme="bootstrap" ng-disabled="!$modal.dataMatrix[outerIndex][5]"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{$modal.chanMatrix[outerIndex][5].Analogue.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="$modal.chanMatrix[outerIndex][5].Analogue.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!$modal.dataMatrix[outerIndex][5]" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--RANGE TABLE END-->

            <!--Communication TABLE BEGIN-->
            <table ng-if="$modal.category === 15" ng-init="$modal.initParam();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th>参数类型</th>
                    <th>参数配置</th>
                </tr>
                </thead>
                <tbody>
                    <tr>
                        <td width="30%" class="chanel_label">
                            波特率
                        </td>
                        <td>
                            <ui-select ng-model="$modal.BaudRate"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.BaudRates | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            数据位
                        </td>
                        <td>
                            <ui-select ng-model="$modal.dataBit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.dataBits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            停止位
                        </td>
                        <td>
                            <ui-select ng-model="$modal.stopBit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.stopBits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            校验位
                        </td>
                        <td>

                            <ui-select ng-model="$modal.checkDigit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.checkDigits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            通信接口地址
                        </td>
                        <td>
                            <ui-select ng-model="$modal.communiInterface"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.communiInterfaces | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            从机地址
                        </td>
                        <td>
                            <ui-select ng-model="$modal.subAdr"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.subAdrs | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr style="height: 20px;"></tr>
                    <!--<tr>
                        <td width="30%" class="chanel_label">
                            底层应用支持
                        </td>
                        <td>
                            <select ng-model="$modal.BaudRate" ng-options="x for x in $modal.BaudRates" class="form-control">
                            </select>
                        </td>
                    </tr>-->
                    <tr>
                        <td width="30%" class="chanel_label">
                            心跳包频率
                        </td>
                        <td>
                            <ui-select ng-model="$modal.heartbeat"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.heartbeats | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr style="height: 20px;"></tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            终端设置密码
                        </td>
                        <td>
                            <input type="text" ng-model="$modal.terminalPass" class="form-control">
                        </td>
                    </tr>


                </tbody>
            </table>
            <!--Communication TABLE END-->

            <!--confirm TABLE BEGIN-->
            <table ng-if="$modal.category === 16"
                   class="table table-striped table-hover table-boiler table-bordered conf_confirm">
                <!--模拟通道-->
                <thead>
                <tr>
                    <th colspan="3">模拟通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="$index<12 && chan_row[0].Name!='默认(未配置)'">
                    <td width="10%" class="chanel_label">
                        模拟通道A
                    </td>
                    <td width="10%" class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][0].Parameter==null">
                            [{{chan_row[0].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[0].Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ chan_row[0].Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ chan_row[0].Parameter.Unit }}</small>)
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][0].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][0].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][0].Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][0].Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][0].Parameter.Unit }}</small>)
                        </div>
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][0].Analogue.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][0].Analogue.Byte.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][0].Analogue.Modbus}}
                    </td>
                </tr>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="$index<12 && chan_row[1].Name!='默认(未配置)'">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        模拟通道B
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][1].Parameter==null">
                            [{{chan_row[1].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[1].Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ chan_row[1].Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ chan_row[1].Parameter.Unit }}</small>)
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][1].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][1].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][1].Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][1].Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][1].Parameter.Unit }}</small>)
                        </div>
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][1].Analogue.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][1].Analogue.Byte.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][1].Analogue.Modbus}}
                    </td>
                </tr>
                </tbody>

                <!--开关通道-->
                <thead>
                <tr>
                    <th colspan="3">开关通道</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="chan_row[2].Name!='默认(未配置)'">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道1
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][2].Parameter==null">
                            [{{chan_row[2].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[2].Parameter.Id }}</small>]
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][2].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][2].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][2].Parameter.Id }}</small>]
                        </div>
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][2].Switch.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][2].Switch.Modbus}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][2].Switch.BitAddress}}
                    </td>
                </tr>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="chan_row[3].Name!='默认(未配置)'">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道2
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][3].Parameter==null">
                            [{{chan_row[3].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[3].Parameter.Id }}</small>]
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][3].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][3].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][3].Parameter.Id }}</small>]
                        </div>

                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][3].Switch.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][3].Switch.Modbus}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][3].Switch.BitAddress}}
                    </td>
                </tr>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="chan_row[4].Name!='默认(未配置)'">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道3
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][4].Parameter==null">
                            [{{chan_row[4].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[4].Parameter.Id }}</small>]
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][4].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][4].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][4].Parameter.Id }}</small>]v
                        </div>
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][4].Switch.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][4].Switch.Modbus}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][4].Switch.BitAddress}}
                    </td>
                </tr>
                </tbody>


                <!--状态通道-->
                <thead>
                <tr>
                    <th colspan="3">状态通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="chan_row in $modal.chanMatrix track by $index" ng-init="outerIndex = $index" ng-if="$index<12 && chan_row[5].Name!='默认(未配置)'">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        状态通道
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div ng-if="$modal.dataMatrix[outerIndex][5].Parameter==null">
                            [{{chan_row[5].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ chan_row[5].Parameter.Id }}</small>]
                        </div>
                        <div ng-if="$modal.dataMatrix[outerIndex][5].Parameter!=null">
                            [{{$modal.dataMatrix[outerIndex][5].Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ $modal.dataMatrix[outerIndex][5].Parameter.Id }}</small>]
                        </div>

                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][5].Analogue.Function.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][5].Analogue.Byte.Name}}
                    </td>
                    <td>
                        {{$modal.chanMatrix[outerIndex][5].Analogue.Modbus}}
                    </td>
                </tr>
                </tbody>


                <!--通信参数-->
                <thead>
                <tr>
                    <th colspan="2">参数类型</th>
                    <th colspan="4">参数配置</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td colspan="2" class="chanel_label">
                        波特率
                    </td>
                    <td colspan="4">
                        {{$modal.BaudRate.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        数据位
                    </td>
                    <td colspan="4">
                        {{$modal.dataBit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        停止位
                    </td>
                    <td colspan="4">
                        {{$modal.stopBit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        校验位
                    </td>
                    <td colspan="4">
                        {{$modal.checkDigit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        通信接口地址
                    </td>
                    <td colspan="4">
                        {{$modal.communiInterface.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        从机地址
                    </td>
                    <td colspan="4">
                        {{$modal.subAdr.Name}}
                    </td>
                </tr>
                <!--<tr>-->
                    <!--<td colspan="2" class="chanel_label">-->
                        <!--底层应用支持-->
                    <!--</td>-->
                    <!--<td colspan="4">-->
                        <!--{{$modal.BaudRate}}-->
                    <!--</td>-->
                <!--</tr>-->
                <tr>
                    <td colspan="2" class="chanel_label">
                        心跳包频率
                    </td>
                    <td colspan="4">
                        {{$modal.heartbeat.Name}}
                    </td>
                </tr>



                </tbody>


            </table>
            <!--confirm TABLE END-->


        </div>
    </div>
</div>

<div class="modal-footer">
    <button class="btn yellow-crusta" type="button" ng-show="$modal.editing && $modal.currentData"
            ng-click="matrixReset()" style="float: left">恢复默认
    </button>
    <button type="button" class="btn btn-info"
            ng-show="$modal.category === 16"
            ng-click=""
            style="float: left">
        模板另存为
    </button>

    <button type="button" class="btn btn-primary"
            ng-show="$modal.category !== 9"
            ng-click="$modal.categoryChanged($modal.category-1)">上一步</button>
    <button type="button" class="btn btn-primary"
            ng-show="$modal.category !== 16"
            ng-click="$modal.categoryChanged($modal.category+1)">下一步</button>

    <button type="button" id="channel_ok"
            class="btn ladda-button btn-primary"
            ng-show="$modal.editing && $modal.category === 16"
            data-style="expand-right"
            ng-click="$modal.ok()"><span class="ladda-label">提交</span></button>
    <button class="btn btn-default" type="button" ng-click="$modal.cancel()">取消</button>
</div>