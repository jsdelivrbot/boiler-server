<div class="modal-header">
    <h3 class="modal-title" ng-show="$modal.category !== 16" style="display: inline-block;" >通道模板配置</h3>
    <h3 class="modal-title" ng-show="$modal.category === 16"  style="display: inline-block;" >配置详情确认</h3>
    {{$modal.currentData.Name}}
</div>
<style type="text/css">
    div.input-group.form-group,
    div.btn-group.form-group {
        padding-left: 15px;
        padding-right: 15px;
    }

    .modal-body .input-group span.unit {
        position: absolute;
        left: auto;
        right: 16px;
        top: 8px;
        float: right;
        z-index: 10;
        color: grey;
    }

    .modal-body .input-group a.addon,
    .modal-section .input-group a.addon {
        position: absolute;
        left: auto;
        right: 6px;
        top: 6px;
        float: right;
        z-index: 10;
        padding: 4px;
        width: 22px;
        height: 22px;
        font-size: 12px;
        line-height: 1em;
    }

    .modal-section {
        padding: 15px;
        text-align: right;
        border-top: 1px solid #e5e5e5;
    }

    .modal-body hr {
        margin-top: 6px;
    }

    #channel div.ui-select-container {
        display: inline-block;
        float: left;
        width: 72.8%;
    }

    #channel div.dropdown-group {
        display: inline-block;
        float: left;
        width: 13.4%;
    }

    #channel button.btn-cell {
        /*border-left: 1px solid #ccc;*/
        width: 100%;
        padding: 6px 3px;
    }

    #channel .table > tbody > tr > td {
        font-size: 13px;
        padding: 2px;
        border: 1px solid #ccc;
    }

    #channel .table > tbody > tr > td .btn-default {
        border: none;
    }

    #channel .tabbable-line {
        margin-left: 12px;
    }

    #channel .tabbable-line > .nav-tabs > li.open,
    #channel .tabbable-line > .nav-tabs > li {
        background: 0 0;
        border-top: none;
        border-bottom: none;
        padding-top: 6px;
    }

    #channel .tabbable-line > .nav-tabs > li.open,
    #channel .tabbable-line > .nav-tabs > li:hover {
        border-top: 4px solid #9fe4ea;
        padding-top: 2px;
    }

    #channel .tabbable-line > .nav-tabs > li.active {
        background: 0 0;
        border-top: 4px solid #36c6d3;
        position: relative;
        padding-top: 2px;
    }

    #channel.portlet.light .nav-tabs > li > a {
        padding: 0 10px 6px 5px;
    }

    #channel.portlet.light > .portlet-title {
        min-height: 0;
    }

    #channel .tabbable-line > .nav-tabs {
        margin-top: -16px;
    }

    #channel .table input{
        border: none;
    }
    #channel .table select{
        border: none;
    }
    #channel .chanel_label{
        color: #555;
        text-align: center;
        background-color: #eee;
        border: 1px solid #ccc;
    }
    #channel .conf_confirm tr{
        height:37px;
    }
    #channel .conf_confirm tr th{
        color: #0b94ea;
    }
    #channel .table .has-error{
        border: 1px solid #e73d4a;
    }
</style>
<div class="modal-body" id="modal-body">
    <div id="channel">
        <div class="row tabbable-line" ng-hide="$modal.category === 16">
            <ul class="nav nav-tabs">
                <li ng-class="{'active': $modal.category === 9}">
                    <a ng-click="$modal.categoryChanged(9);">
                        <i class="icon-graph"></i>
                        模拟通道A
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 10}">
                    <a ng-click="$modal.categoryChanged(10);">
                        <i class="icon-graph"></i>
                        模拟通道B
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 11}">
                    <a ng-click="$modal.categoryChanged(11);">
                        <i class="fa fa-sliders"></i>
                        开关通道1
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 12}">
                    <a ng-click="$modal.categoryChanged(12);">
                        <i class="fa fa-sliders"></i>
                        开关通道2
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 13}">
                    <a ng-click="$modal.categoryChanged(13);">
                        <i class="fa fa-sliders"></i>
                        开关通道3
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 14}">
                    <a ng-click="$modal.categoryChanged(14);">
                        <i class="fa fa-pie-chart"></i>
                        状态通道
                    </a>
                </li>
                <li ng-class="{'active': $modal.category === 15}">
                    <a ng-click="$modal.categoryChanged(15);">
                        <i class="fa fa-wifi"></i>
                        通信参数
                    </a>
                </li>
            </ul>
        </div>
        <div class="row" style="padding: 0 15px;">
            <!--ANALOG A TABLE BEGIN-->
            <table ng-if="$modal.category === 9" ng-init="$modal.initAnalog1();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>模拟通道A</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.analogData1 track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ $index +1 }}
                    </td>
                    <td>
                        <div class="btn-group" uib-dropdown style="width: 100%;">
                            <button type="button" uib-dropdown-toggle
                                    ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]"
                                    style="width: 11%;">
                                <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                <span class="sr-only">通道状态</span>
                            </button>
                            <ui-select ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap"
                                       style="width: 89%;">
                            <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）'}}">[{{$select.selected.Name}}][
                                <small class="font-blue-oleo">{{ $select.selected.Id }}</small>](
                                <small class="font-blue-oleo">{{ $select.selected.Scale }}</small>
                                <small class="font-blue-oleo">{{ $select.selected.Unit }}</small>)
                            </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[0] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>][
                                    <small ng-bind-html="param.Id | highlight: $select.search"></small>](
                                    <small ng-bind-html="param.Scale | highlight: $select.search"></small>
                                    <small ng-bind-html="param.Unit | highlight: $select.search"></small>)
                                </ui-select-choices>
                            </ui-select>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                <li class="dropdown-submenu">
                                    <a href><i class="fa fa-eye"></i> 位置</a>
                                    <ul class="dropdown-menu" style="min-width: 44px;">
                                        <li ng-repeat="priority in $modal.priorities">
                                            <a href ng-click="setStatus1(outerIndex, 1, priority)"> {{ priority }}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li role="menuitem"><a href ng-click="setStatus1(outerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                <li class="divider"></li>
                                <li role="menuitem"><a href ng-click="setStatus1(outerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode1 | filter: $select.search ">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="data.Byte"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips.html'"
                                class="form-control" >


                        <script type="text/ng-template" id="modbusTips.html">
                            <div>
                                <p>
                                    功能码03对应范围 <b>40001-49999</b>
                                    <br/>
                                    功能码04对应范围 <b>30001-39999</b>
                                </p>
                            </div>
                        </script>

                    </td>
                </tr>
                </tbody>
            </table>
            <!--ANALOG A TABLE END-->

            <!--ANALOG B TABLE BEGIN-->
            <table ng-if="$modal.category === 10"  ng-init="$modal.initAnalog2();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>模拟通道B</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.analogData2 track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td>
                        <div class="btn-group" uib-dropdown style="width: 100%;">
                            <button type="button" uib-dropdown-toggle
                                    ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]"
                                    style="width: 11%;">
                                <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                <span class="sr-only">通道状态</span>
                            </button>
                            <ui-select ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap"
                                       style="width: 89%;">
                                <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）'}}">[{{$select.selected.Name}}][
                                    <small class="font-blue-oleo">{{ $select.selected.Id }}</small>](
                                    <small class="font-blue-oleo">{{ $select.selected.Scale }}</small>
                                    <small class="font-blue-oleo">{{ $select.selected.Unit }}</small>)
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[1] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>][
                                    <small ng-bind-html="param.Id | highlight: $select.search"></small>](
                                    <small ng-bind-html="param.Scale | highlight: $select.search"></small>
                                    <small ng-bind-html="param.Unit | highlight: $select.search"></small>)
                                </ui-select-choices>
                            </ui-select>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                <li class="dropdown-submenu">
                                    <a href><i class="fa fa-eye"></i> 位置</a>
                                    <ul class="dropdown-menu" style="min-width: 44px;">
                                        <li ng-repeat="priority in $modal.priorities">
                                            <a href ng-click="setStatus2(outerIndex, 1, priority)"> {{ priority }}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li role="menuitem"><a href ng-click="setStatus2(outerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                <li class="divider"></li>
                                <li role="menuitem"><a href ng-click="setStatus2(outerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode1 | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="data.Byte"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Analogue.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips.html'" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--ANALOG B TABLE END-->


            <script type="text/ng-template" id="modbusTips2.html">
                <div>
                    <p>
                        功能码01对应范围 <b>00001-09999</b>
                        <br/>
                        功能码02对应范围 <b>10001-19999</b>
                        <br/>
                        功能码03对应范围 <b>40001-49999</b>
                    </p>
                </div>
            </script>
            <script type="text/ng-template" id="bitAddressTips.html">
                <div>
                    <p>
                        功能码01对应位地址 <b>1</b>
                        <br/>
                        功能码02对应位地址 <b>1</b>
                        <br/>
                        功能码03对应位地址 <b>1-16</b>
                    </p>
                </div>
            </script>
            <!--SWITCH A TABLE BEGIN-->
            <table ng-if="$modal.category === 11" ng-init="$modal.initSwitch1();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道A</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.switchData1 track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                    <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus3(outerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus3(outerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus3(outerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-show="outerIndex !== 0 && outerIndex !== 1" ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）'}}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                   [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <input type="text"
                                   ng-show="outerIndex === 0 || outerIndex === 1 "
                                   ng-model="data.Parameter.Name"
                                   ng-disabled="true"
                                   class="form-control ng-pristine ng-valid ng-touched has-success"
                                   placeholder="{{ data.Parameter.Name||'默认（未配置）' }}" style="width: 86.4%; border: none;">
                            <div uib-dropdown ng-show="outerIndex !== 0 && outerIndex !== 1" class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': data.SwitchStatus === 1}, {'yellow-lemon': data.SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': data.SwitchStatus === 1}, {'fa-warning': data.SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus1(outerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus1(outerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap" ng-disabled="outerIndex === 1||!data||!data.Parameter"
                                   ng-change="fCodeChange1(data.Func,outerIndex,1)"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode2 | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="outerIndex === 1||!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips2.html'" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="data.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="outerIndex === 1||!data||!data.Parameter"
                               uib-tooltip-template="'bitAddressTips.html'" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH A TABLE END-->

            <!--SWITCH B TABLE BEGIN-->
            <table ng-if="$modal.category === 12" ng-init="$modal.initSwitch2();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道B</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.switchData2 track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                    <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus4(outerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus(outerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）' }}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': data.SwitchStatus === 1}, {'yellow-lemon': data.SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': data.SwitchStatus === 1}, {'fa-warning': data.SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus2(outerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus2(outerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap"  ng-disabled="!data||!data.Parameter"
                                   ng-change="fCodeChange2(data.Func,outerIndex)"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode2 | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips2.html'" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="data.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'bitAddressTips.html'" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH B TABLE END-->

            <!--SWITCH C TABLE BEGIN-->
            <table ng-if="$modal.category === 13" ng-init="$modal.initSwitch3();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>开关通道C</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.switchData3 track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex +1 }}
                    </td>
                    <td width="30%">
                        <div class="btn-group" style="width: 100%;">
                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]">
                                    <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                    <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus5(outerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus5(outerIndex, 2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus5(outerIndex, 0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>
                            <ui-select ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap">
                                <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）' }}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="param in $modal.parameters[2] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>

                            <div uib-dropdown class="dropdown-group">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0"
                                        ng-class="['btn', 'btn-cell', {'blue': data.SwitchStatus === 1}, {'yellow-lemon': data.SwitchStatus === 2}]">
                                    <i ng-class="['fa', {'fa-bolt': data.SwitchStatus === 1}, {'fa-warning': data.SwitchStatus === 2}]"></i>
                                    <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li role="menuitem"><a href ng-click="setSwitchStatus3(outerIndex, 1);"><i class="fa fa-bolt"></i> 运行状态</a></li>
                                    <li role="menuitem"><a href ng-click="setSwitchStatus3(outerIndex, 2);"><i class="fa fa-warning"></i> 故障状态</a></li>
                                </ul>
                            </div>

                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   ng-change="fCodeChange3(data.Func,outerIndex)"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode2 | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips2.html'" class="form-control">
                    </td>
                    <td>
                        <input type="text" ng-model="data.BitAddress" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'bitAddressTips.html'" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--SWITCH C TABLE END-->

            <!--RANGE TABLE BEGIN-->
            <table ng-if="$modal.category === 14" ng-init="$modal.initRange();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th></th>
                    <th>状态通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.rangData track by $index"
                    ng-init="outerIndex = $index">
                    <td width="10%"
                        style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        通道{{ outerIndex + 1 }}
                    </td>
                    <td width="40%">
                        <div class="btn-group" style="width: 100%;">
                            <div class="dropdown-group" uib-dropdown style="width: 10%;">
                                <button type="button" uib-dropdown-toggle
                                        ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                        ng-class="['btn', 'btn-cell', {'default': data.Status === 0}, {'green': data.Status === 1}, {'red': data.Status === 2}]">
                                        <i ng-class="['fa', {'fa-ellipsis-h': data.Status === 0}, {'fa-eye': data.Status === 1}, {'fa-eye-slash': data.Status === 2}]"></i>
                                        <span ng-show="data.Status === 1">{{ data.SequenceNumber }}</span>
                                        <span class="sr-only">通道状态</span>
                                </button>
                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                    <li class="dropdown-submenu">
                                        <a href><i class="fa fa-eye"></i> 关注</a>
                                        <ul class="dropdown-menu" style="min-width: 44px;">
                                            <li ng-repeat="priority in $modal.priorities">
                                                <a href ng-click="setStatus6(outerIndex, 1, priority)"> {{ priority }}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li role="menuitem"><a href ng-click="setStatus6(outerIndex,2)"><i class="fa fa-eye-slash"></i> 隐藏</a></li>
                                    <!--<li role="menuitem"><a href="#">Something else here</a></li>-->
                                    <li class="divider"></li>
                                    <li role="menuitem"><a href ng-click="setStatus6(outerIndex,0)"><i class="fa fa-ellipsis-h"></i> 默认</a></li>
                                </ul>
                            </div>

                            <ui-select ng-model="data.Parameter"
                                       ng-change="$modal.dataChanged(data);"
                                       theme="bootstrap"
                                       style="width: 80%;">
                                <ui-select-match placeholder="{{data.Parameter.Name||'默认（未配置）' }}">[{{$select.selected.Name}}]
                                    [<small class="font-blue-oleo">{{ $select.selected.Id }}</small>]
                                </ui-select-match>
                                <ui-select-choices repeat="param in $modal.parameters[4] | filter: $select.search">
                                    [<span ng-bind-html="param.Name | highlight: $select.search"></span>]
                                    [<small ng-bind-html="param.Id | highlight: $select.search"></small>]
                                </ui-select-choices>
                            </ui-select>
                            <button type="button"
                                    ng-disabled="!data.Parameter || data.Parameter.Id <= 0 || data.Status === -1"
                                    ng-class="['btn', 'btn-cell', {'default': data.Ranges.length <= 0}, {'blue-sharp': data.Ranges.length > 0}]"
                                    ng-click="$modal.openRange(data, outerIndex)"
                                    style="width: 10%;">
                                <i ng-class="['fa', {'fa-calendar-plus-o': data.Ranges.length <= 0}, {'fa-calendar-check-o': data.Ranges.length > 0}]"></i>
                            </button>
                        </div>
                    </td>
                    <td>
                        <ui-select ng-model="data.Func"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Func.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="fCode in $modal.fcode1 | filter: $select.search">
                                {{fCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <ui-select ng-model="data.Byte"
                                   theme="bootstrap" ng-disabled="!data||!data.Parameter"
                                   style="width: 100%;">
                            <ui-select-match placeholder="{{data.Byte.Name||'默认(未配置)'}}">
                                {{$select.selected.Name}}
                            </ui-select-match>
                            <ui-select-choices
                                    repeat="hlCode in $modal.hlCodes | filter: $select.search">
                                {{hlCode.Name}}
                            </ui-select-choices>
                        </ui-select>
                    </td>
                    <td>
                        <input type="text" ng-model="data.Modbus" placeholder="默认（未配置）"
                               ng-disabled="!data||!data.Parameter"
                               uib-tooltip-template="'modbusTips.html'" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <!--RANGE TABLE END-->

            <!--Communication TABLE BEGIN-->
            <table ng-if="$modal.category === 15" ng-init="$modal.initParam();"
                   class="table table-striped table-hover table-checkable order-column table-boiler">
                <thead>
                <tr>
                    <th>参数类型</th>
                    <th>参数配置</th>
                </tr>
                </thead>
                <tbody>
                    <tr>
                        <td width="30%" class="chanel_label">
                            波特率
                        </td>
                        <td>
                            <ui-select ng-model="$modal.BaudRate"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.BaudRates | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            数据位
                        </td>
                        <td>
                            <ui-select ng-model="$modal.dataBit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.dataBits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            停止位
                        </td>
                        <td>
                            <ui-select ng-model="$modal.stopBit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.stopBits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            校验位
                        </td>
                        <td>

                            <ui-select ng-model="$modal.checkDigit"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.checkDigits | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            通信接口地址
                        </td>
                        <td>
                            <ui-select ng-model="$modal.communiInterface"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.communiInterfaces | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            从机地址
                        </td>
                        <td>
                            <ui-select ng-model="$modal.subAdr"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.subAdrs | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr style="height: 20px;"></tr>

                    <tr>
                        <td width="30%" class="chanel_label">
                            心跳包频率
                        </td>
                        <td>
                            <ui-select ng-model="$modal.heartbeat"
                                       theme="bootstrap"
                                       style="width: 100%;">
                                <ui-select-match>
                                    {{$select.selected.Name}}
                                </ui-select-match>
                                <ui-select-choices
                                        repeat="x in $modal.heartbeats | filter: $select.search">
                                    {{x.Name}}
                                </ui-select-choices>
                            </ui-select>
                        </td>
                    </tr>
                    <tr style="height: 20px;"></tr>
                    <tr>
                        <td width="30%" class="chanel_label">
                            模板名称
                        </td>
                        <td>
                            <input type="text" ng-model="$modal.currentData.Name" class="form-control">
                        </td>
                    </tr>


                </tbody>
            </table>
            <!--Communication TABLE END-->

            <!--confirm TABLE BEGIN-->
            <table ng-if="$modal.category === 16"
                   class="table table-striped table-hover table-boiler table-bordered conf_confirm">
                <!--模拟通道-->
                <thead>
                <tr>
                    <th colspan="3">模拟通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.analogData1 track by $index" ng-init="outerIndex = $index" ng-if="data.Parameter">
                    <td width="10%" class="chanel_label">
                        模拟通道A
                    </td>
                    <td width="10%" class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>

                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ data.Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ data.Parameter.Unit }}</small>)
                        </div>
                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Byte.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                </tr>
                <tr ng-repeat="data in $modal.analogData2 track by $index" ng-init="outerIndex = $index" ng-if="data.Parameter">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        模拟通道B
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                            (<small class="font-blue-oleo">{{ data.Parameter.Scale }}</small>
                            <small class="font-blue-oleo">{{ data.Parameter.Unit }}</small>)
                        </div>
                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Byte.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                </tr>
                </tbody>

                <!--开关通道-->
                <thead>
                <tr>
                    <th colspan="3">开关通道</th>
                    <th>功能码</th>
                    <th>MODBUS地址</th>
                    <th>位地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.switchData1 track by $index" ng-init="outerIndex = $index" ng-if="data.Parameter">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道1
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>

                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                        </div>
                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                    <td>
                        {{data.BitAddress}}
                    </td>
                </tr>
                <tr ng-repeat="data in $modal.switchData2 track by $index" ng-init="outerIndex = $index" ng-if="data.Parameter">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道2
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                        </div>
                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                    <td>
                        {{data.BitAddress}}
                    </td>
                </tr>
                <tr ng-repeat="data in $modal.switchData3 track by $index" ng-init="outerIndex = $index" ng-if="data.Parameter">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        开关通道3
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                        </div>
                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                    <td>
                        {{data.BitAddress}}
                    </td>
                </tr>
                </tbody>


                <!--状态通道-->
                <thead>
                <tr>
                    <th colspan="3">状态通道</th>
                    <th>功能码</th>
                    <th>高低字节</th>
                    <th>MODBUS地址</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="data in $modal.rangData track by $index" ng-init="outerIndex = $index"
                    ng-if="data.Parameter">
                    <td width="30%" style="color: #555; text-align: center;background-color: #eee; border: 1px solid #ccc; ">
                        状态通道
                    </td>
                    <td class="chanel_label">
                        通道{{outerIndex +1}}
                    </td>
                    <td>
                        <div>
                            [{{data.Parameter.Name}}]
                            [<small class="font-blue-oleo">{{ data.Parameter.Id }}</small>]
                        </div>

                    </td>
                    <td>
                        {{data.Func.Name}}
                    </td>
                    <td>
                        {{data.Byte.Name}}
                    </td>
                    <td>
                        {{data.Modbus}}
                    </td>
                </tr>
                </tbody>


                <!--通信参数-->
                <thead>
                <tr>
                    <th colspan="2">参数类型</th>
                    <th colspan="4">参数配置</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td colspan="2" class="chanel_label">
                        波特率
                    </td>
                    <td colspan="4">
                        {{$modal.BaudRate.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        数据位
                    </td>
                    <td colspan="4">
                        {{$modal.dataBit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        停止位
                    </td>
                    <td colspan="4">
                        {{$modal.stopBit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        校验位
                    </td>
                    <td colspan="4">
                        {{$modal.checkDigit.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        通信接口地址
                    </td>
                    <td colspan="4">
                        {{$modal.communiInterface.Name}}
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="chanel_label">
                        从机地址
                    </td>
                    <td colspan="4">
                        {{$modal.subAdr.Name}}
                    </td>
                </tr>

                <tr>
                    <td colspan="2" class="chanel_label">
                        心跳包频率
                    </td>
                    <td colspan="4">
                        {{$modal.heartbeat.Name}}
                    </td>
                </tr>

                <tr>
                    <td colspan="2" class="chanel_label">
                        模板名称
                    </td>
                    <td colspan="4">
                        {{$modal.currentData.Name}}
                    </td>
                </tr>



                </tbody>


            </table>
            <!--confirm TABLE END-->


        </div>
    </div>
</div>

<div class="modal-footer">
    <button class="btn yellow-crusta" type="button" ng-show="$modal.editing && $modal.currentData"
            ng-click="matrixReset()" style="float: left">恢复默认
    </button>


    <button type="button" class="btn btn-primary"
            ng-show="$modal.category !== 9"
            ng-click="$modal.categoryChanged($modal.category-1)">上一步</button>
    <button type="button" class="btn btn-primary"
            ng-show="$modal.category !== 16"
            ng-click="$modal.categoryChanged($modal.category+1)">下一步</button>

    <button type="button" id="channel_ok"
            class="btn ladda-button btn-primary"
            ng-show="$modal.editing && $modal.category === 16"
            data-style="expand-right"
            ng-click="$modal.ok()"><span class="ladda-label">提交</span></button>
    <button class="btn btn-default" type="button" ng-click="$modal.cancel()">取消</button>
</div>